# 数据可视化工具 - 测试说明

## 测试文件结构

```
tests/
├── test-runner.html    # 测试运行器（在浏览器中运行）
└── README.md          # 本文件

test-data/
├── sample-data.csv           # 基本测试数据
├── product-sales.csv         # 产品销售数据
├── large-dataset.csv         # 大数据集测试
├── empty-data.csv           # 空数据测试
└── special-characters.csv   # 特殊字符测试
```

## 如何运行测试

### 1. 单元测试

1. 在浏览器中打开 `tests/test-runner.html`
2. 点击"运行所有测试"按钮
3. 查看测试结果

### 2. 手动功能测试

1. 在浏览器中打开 `index.html`
2. 使用 `test-data/` 目录中的测试文件进行功能测试

## 测试用例说明

### 单元测试覆盖范围

- **FileHandler 模块**
  - 文件大小格式化
  - 文件类型验证
  - 文件读取功能

- **DataParser 模块**
  - CSV 解析功能
  - Excel 解析功能
  - 数据类型检测
  - 数据验证

- **ChartGenerator 模块**
  - 数据准备
  - 主题颜色获取
  - 图表配置生成

- **NotificationSystem 模块**
  - 通知类型配置
  - 通知显示功能

- **ExportManager 模块**
  - 浏览器支持检查
  - 导出功能

### 测试数据文件说明

1. **sample-data.csv** - 基本的月度销售数据，用于测试基本功能
2. **product-sales.csv** - 产品销售数据，包含不同类别的产品
3. **large-dataset.csv** - 较大的数据集，用于测试性能
4. **empty-data.csv** - 只有标题行的空数据，用于测试错误处理
5. **special-characters.csv** - 包含特殊字符和引号的数据，用于测试解析健壮性

## 手动测试流程

### 基本功能测试

1. **文件上传测试**
   - 拖拽上传 `sample-data.csv`
   - 点击浏览按钮上传 `product-sales.csv`
   - 尝试上传不支持的文件格式（应显示错误）

2. **数据预览测试**
   - 验证数据表格正确显示
   - 检查列类型标识是否正确
   - 验证数据行数限制（最多显示10行）

3. **图表生成测试**
   - 选择不同的图表类型
   - 选择不同的X轴和Y轴数据
   - 测试图表标题、图例、网格线选项

4. **图表导出测试**
   - 导出为PNG格式
   - 导出为JPG格式
   - 导出为PDF格式
   - 测试自定义尺寸和背景选项

5. **响应式测试**
   - 在不同屏幕尺寸下测试
   - 测试移动端菜单功能
   - 验证触摸交互

### 错误处理测试

1. **文件错误测试**
   - 上传过大的文件（>10MB）
   - 上传不支持的文件格式
   - 上传损坏的文件

2. **数据错误测试**
   - 上传 `empty-data.csv`（空数据）
   - 选择相同的X轴和Y轴列
   - 在没有数据时尝试生成图表

3. **导出错误测试**
   - 在没有图表时尝试导出
   - 测试导出过程中的错误处理

## 性能测试

1. **大文件处理**
   - 使用 `large-dataset.csv` 测试大数据处理
   - 监控内存使用情况
   - 测试图表渲染性能

2. **并发操作**
   - 快速连续上传多个文件
   - 快速切换图表类型和选项
   - 测试系统稳定性

## 浏览器兼容性测试

建议在以下浏览器中测试：

- Chrome (最新版本)
- Firefox (最新版本)
- Safari (最新版本)
- Edge (最新版本)

## 测试报告

测试完成后，请记录：

1. 通过的测试用例数量
2. 失败的测试用例及原因
3. 发现的bug和问题
4. 性能表现
5. 浏览器兼容性问题

## 持续集成

未来可以考虑集成到CI/CD流程中：

1. 自动化单元测试
2. 自动化功能测试
3. 性能回归测试
4. 跨浏览器自动化测试